{"version":3,"sources":["webpack:///server.js","webpack:///webpack/bootstrap 6aad914322ed7ce01a85","webpack:///../app/server.js","webpack:///external \"axios\"","webpack:///./webpack.server.js","webpack:///../app/scripts/constants/constants.js","webpack:///./helpers.js","webpack:///external \"path\"","webpack:///external \"app-root-path\"","webpack:///external \"inline-environment-variables-webpack-plugin\"","webpack:///external \"webpack-node-externals\"","webpack:///external \"webpack\"","webpack:///external \"koa-compress\"","webpack:///external \"koa-cors\"","webpack:///external \"fs-extra\"","webpack:///external \"koa\"","webpack:///external \"koa-logging\"","webpack:///external \"koa-ejs\"","webpack:///external \"node-schedule\"","webpack:///external \"koa-static\"","webpack:///external \"koa-useragent\"","webpack:///external \"babel-polyfill\"","webpack:///external \"koa-router\""],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","getPost","titleUrl","posts","_fsExtra2","readJsonSync","i","length","title_url","_axios","_axios2","_webpack","_webpack2","_koaCompress","_koaCompress2","_koaCors","_koaCors2","_fsExtra","_helpers","_helpers2","_koa","_koa2","_koaLogging","_path","_koaEjs","_koaEjs2","_nodeSchedule","_nodeSchedule2","_koaStatic","_koaStatic2","_koaUseragent","_koaUseragent2","_constants","app","router","hostname","process","env","HOSTNAME","port","PORT","scheduleJob","hour","minute","dayOfWeek","get","SERVER_URL","then","response","data","root","writeJsonSync","JSON","stringify","layout","viewExt","cache","debug","regeneratorRuntime","mark","_callee","next","wrap","_context","prev","this","params","Object","assign","meta","metadata","title","description","subheading","publishedTime","created_at","modifiedTime","updated_at","type","url","request","href","render","webpackConfig","stop","_callee2","_context2","use","routes","allowedMethods","listen","console","info","require","__dirname","constants","helpers","InlineEnviromentVariablesPlugin","nodeExternals","path","webpack","METADATA","favicon","ICON","image","IMAGE_URL","DESCRIPTION","name","SITE_NAME","target","context","devtool","entry","output","filename","plugins","DefinePlugin","__CLIENT__","__SERVER__","__PRODUCTION__","__DEV__","NODE_ENV","optimize","UglifyJsPlugin","minimize","compress","warnings","loaders","test","exclude","postLoaders","noParse","externals","whitelist","resolve","moduleDirectories","extensions","node","fs","global","crypto","clearImmediate","setImmediate","STRIPE","PUBLISHABLE_KEY","appRoot","args","Array","prototype","slice","arguments","join","apply","concat"],"mappings":"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","file":"server.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _axios = __webpack_require__(2);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tvar _webpack = __webpack_require__(3);\n\t\n\tvar _webpack2 = _interopRequireDefault(_webpack);\n\t\n\tvar _koaCompress = __webpack_require__(11);\n\t\n\tvar _koaCompress2 = _interopRequireDefault(_koaCompress);\n\t\n\tvar _koaCors = __webpack_require__(12);\n\t\n\tvar _koaCors2 = _interopRequireDefault(_koaCors);\n\t\n\tvar _fsExtra = __webpack_require__(13);\n\t\n\tvar _fsExtra2 = _interopRequireDefault(_fsExtra);\n\t\n\tvar _helpers = __webpack_require__(5);\n\t\n\tvar _helpers2 = _interopRequireDefault(_helpers);\n\t\n\tvar _koa = __webpack_require__(14);\n\t\n\tvar _koa2 = _interopRequireDefault(_koa);\n\t\n\tvar _koaLogging = __webpack_require__(15);\n\t\n\tvar _koaLogging2 = _interopRequireDefault(_koaLogging);\n\t\n\tvar _path = __webpack_require__(6);\n\t\n\tvar _path2 = _interopRequireDefault(_path);\n\t\n\tvar _koaEjs = __webpack_require__(16);\n\t\n\tvar _koaEjs2 = _interopRequireDefault(_koaEjs);\n\t\n\tvar _nodeSchedule = __webpack_require__(17);\n\t\n\tvar _nodeSchedule2 = _interopRequireDefault(_nodeSchedule);\n\t\n\tvar _koaStatic = __webpack_require__(18);\n\t\n\tvar _koaStatic2 = _interopRequireDefault(_koaStatic);\n\t\n\tvar _koaUseragent = __webpack_require__(19);\n\t\n\tvar _koaUseragent2 = _interopRequireDefault(_koaUseragent);\n\t\n\tvar _constants = __webpack_require__(4);\n\t\n\t__webpack_require__(20);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar app = (0, _koa2.default)();\n\tvar router = __webpack_require__(21)();\n\tvar hostname = process.env.HOSTNAME || 'localhost';\n\tvar port = process.env.PORT || 8000;\n\t\n\tfunction getPost(titleUrl) {\n\t  var posts = _fsExtra2.default.readJsonSync('cache.json', 'utf8');\n\t  for (var i = 0; posts.length > i; i += 1) {\n\t    if (posts[i].title_url === titleUrl) {\n\t      return posts[i];\n\t    }\n\t  }\n\t  return false;\n\t}\n\t\n\tvar task = _nodeSchedule2.default.scheduleJob({ hour: 0, minute: 0, dayOfWeek: 0 }, function () {\n\t  _axios2.default.get(_constants.SERVER_URL + '/posts').then(function (response) {\n\t    if (response.data !== _fsExtra2.default.readJsonSync(_helpers2.default.root('app/cache.json'), 'utf8')) {\n\t      _fsExtra2.default.writeJsonSync(_helpers2.default.root('app/cache.json'), JSON.stringify(response.data));\n\t    }\n\t  });\n\t});\n\t\n\t(0, _koaEjs2.default)(app, {\n\t  root: _helpers2.default.root('app'),\n\t  layout: 'index',\n\t  viewExt: 'html',\n\t  cache: false,\n\t  debug: true\n\t});\n\t\n\trouter.get('/posts/:title_url', regeneratorRuntime.mark(function _callee(next) {\n\t  var data;\n\t  return regeneratorRuntime.wrap(function _callee$(_context) {\n\t    while (1) {\n\t      switch (_context.prev = _context.next) {\n\t        case 0:\n\t          data = getPost(this.params.title_url);\n\t\n\t          Object.assign(_webpack2.default.meta.metadata, {\n\t            title: data.title,\n\t            description: data.subheading,\n\t            publishedTime: data.created_at,\n\t            modifiedTime: data.updated_at,\n\t            type: 'article',\n\t            url: this.request.href\n\t          });\n\t          _context.next = 4;\n\t          return this.render('index', { webpackConfig: _webpack2.default });\n\t\n\t        case 4:\n\t        case 'end':\n\t          return _context.stop();\n\t      }\n\t    }\n\t  }, _callee, this);\n\t}));\n\t\n\trouter.get('*', regeneratorRuntime.mark(function _callee2(next) {\n\t  return regeneratorRuntime.wrap(function _callee2$(_context2) {\n\t    while (1) {\n\t      switch (_context2.prev = _context2.next) {\n\t        case 0:\n\t          _context2.next = 2;\n\t          return this.render('index', { webpackConfig: _webpack2.default });\n\t\n\t        case 2:\n\t        case 'end':\n\t          return _context2.stop();\n\t      }\n\t    }\n\t  }, _callee2, this);\n\t}));\n\t\n\tapp.use((0, _koaStatic2.default)('static'));\n\t\n\tapp.use((0, _koaCors2.default)());\n\t\n\tapp.use(router.routes());\n\t\n\tapp.use(router.allowedMethods());\n\t\n\tapp.use((0, _koaCompress2.default)());\n\t\n\tapp.use((0, _koaUseragent2.default)());\n\t\n\tapp.listen(port, function () {\n\t  console.info('==> âœ…  Node vars:', process.env);\n\t  console.info('==> âœ…  Server is listening');\n\t  console.info('==> ðŸŒŽ  Go to http://%s:%s', hostname, port);\n\t});\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"axios\");\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(__dirname) {'use strict';\n\t\n\tvar constants = __webpack_require__(4);\n\tvar helpers = __webpack_require__(5);\n\tvar InlineEnviromentVariablesPlugin = __webpack_require__(8);\n\tvar nodeExternals = __webpack_require__(9);\n\tvar path = __webpack_require__(6);\n\tvar webpack = __webpack_require__(10);\n\t\n\tvar METADATA = {\n\t  title: 'Rose St. Community Center',\n\t  favicon: constants.ICON,\n\t  metadata: {\n\t    image: constants.IMAGE_URL,\n\t    description: constants.DESCRIPTION,\n\t    name: constants.SITE_NAME,\n\t    type: 'website',\n\t    url: process.env.HOSTNAME || 'localhost'\n\t  }\n\t};\n\t\n\tmodule.exports = {\n\t  meta: METADATA,\n\t  target: 'node',\n\t  cache: false,\n\t  context: __dirname,\n\t  debug: false,\n\t  devtool: 'source-map',\n\t  entry: [helpers.root('app/server.js')],\n\t  output: {\n\t    path: helpers.root('dist'),\n\t    filename: 'server.js'\n\t  },\n\t  plugins: [new webpack.DefinePlugin({ __CLIENT__: false, __SERVER__: true, __PRODUCTION__: true, __DEV__: false }), new InlineEnviromentVariablesPlugin({ NODE_ENV: 'production' }), new webpack.optimize.UglifyJsPlugin({ minimize: true, compress: { warnings: false } })],\n\t  module: {\n\t    loaders: [{ test: /\\.json$/, loaders: ['json'] }, { test: /\\.js$/, loaders: ['babel?presets[]=es2015&presets[]=stage-0&plugins[]=transform-function-bind&plugins[]=transform-class-properties&plugins[]=transform-decorators-legacy'], exclude: /node_modules/ }],\n\t    postLoaders: [],\n\t    noParse: /\\.min\\.js/\n\t  },\n\t  externals: [nodeExternals({\n\t    whitelist: ['webpack/hot/poll?1000']\n\t  })],\n\t  resolve: {\n\t    moduleDirectories: [path.resolve('app'), path.resolve('node_modules'), path.resolve('static')],\n\t    extensions: ['', '.json', '.js']\n\t  },\n\t  node: {\n\t    __dirname: true,\n\t    fs: 'empty',\n\t    global: 'window',\n\t    crypto: 'empty',\n\t    process: true,\n\t    module: false,\n\t    clearImmediate: false,\n\t    setImmediate: false\n\t  }\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, \"\"))\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t  STRIPE: {\n\t    PUBLISHABLE_KEY:  false ? 'pk_test_f6MApsp3oUQNaZSejidOONkT' : process.env.STRIPE\n\t  },\n\t  ICON: 'https://raw.githubusercontent.com/idelairre/rose_st_client/master/app/favicon.ico',\n\t  IMAGE_URL: 'https://raw.githubusercontent.com/idelairre/rose_st_client/master/app/images/10612805_674783332611610_5602889381423136186_n.jpg',\n\t  DESCRIPTION: '74 blocks (with the goal of 100) in East Baltimore where the peace is encouraged by the youth of the community, NOT THE POLICE!',\n\t  SITE_NAME: 'Rose St. Community Center',\n\t  SERVER_URL: 'https://rose-st-api.herokuapp.com'\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar path = __webpack_require__(6);\n\tvar appRoot = __webpack_require__(7);\n\t\n\tmodule.exports.root = function (args) {\n\t  args = Array.prototype.slice.call(arguments, 0);\n\t  return path.join.apply(path, [appRoot.path].concat(args));\n\t};\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"path\");\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"app-root-path\");\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"inline-environment-variables-webpack-plugin\");\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"webpack-node-externals\");\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"webpack\");\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"koa-compress\");\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"koa-cors\");\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"fs-extra\");\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"koa\");\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"koa-logging\");\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"koa-ejs\");\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"node-schedule\");\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"koa-static\");\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"koa-useragent\");\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"babel-polyfill\");\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"koa-router\");\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** server.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6aad914322ed7ce01a85\n **/","import axios from 'axios';\nimport config from '../configs/webpack.server';\nimport compress from 'koa-compress';\nimport cors from 'koa-cors';\nimport fs from 'fs-extra';\nimport helpers from '../configs/helpers';\nimport koa from 'koa';\nimport logger from 'koa-logging';\nimport path from 'path';\nimport render from 'koa-ejs';\nimport schedule from 'node-schedule';\nimport serve from 'koa-static';\nimport userAgent from 'koa-useragent';\nimport { DESCRIPTION, IMAGE_URL, SERVER_URL, SITE_NAME } from './scripts/constants/constants';\nimport 'babel-polyfill';\n\nconst app = koa();\nconst router = require('koa-router')();\nconst hostname = process.env.HOSTNAME || 'localhost';\nconst port = process.env.PORT || 8000;\n\nfunction getPost(titleUrl) {\n  let posts = fs.readJsonSync('cache.json', 'utf8');\n  for (let i = 0; posts.length > i; i += 1) {\n    if (posts[i].title_url === titleUrl) {\n      return posts[i];\n    }\n  }\n  return false;\n}\n\nconst task = schedule.scheduleJob({ hour: 0, minute: 0, dayOfWeek: 0 }, function () {\n  axios.get(`${SERVER_URL}/posts`).then(response => {\n    if (response.data !== fs.readJsonSync(helpers.root('app/cache.json'), 'utf8')) {\n      fs.writeJsonSync(helpers.root('app/cache.json'), JSON.stringify(response.data));\n    }\n  });\n});\n\nrender(app, {\n  root: helpers.root('app'),\n  layout: 'index',\n  viewExt: 'html',\n  cache: false,\n  debug: true\n});\n\nrouter.get('/posts/:title_url', function *(next) {\n  const data = getPost(this.params.title_url);\n  Object.assign(config.meta.metadata, {\n    title: data.title,\n    description: data.subheading,\n    publishedTime: data.created_at,\n    modifiedTime: data.updated_at,\n    type: 'article',\n    url: this.request.href\n  });\n  yield this.render('index', { webpackConfig : config });\n});\n\nrouter.get('*', function *(next) {\n  yield this.render('index', { webpackConfig : config });\n});\n\napp.use(serve('static'));\n\napp.use(cors());\n\napp.use(router.routes());\n\napp.use(router.allowedMethods());\n\napp.use(compress());\n\napp.use(userAgent());\n\napp.listen(port, () => {\n  console.info('==> âœ…  Node vars:', process.env);\n  console.info('==> âœ…  Server is listening');\n  console.info('==> ðŸŒŽ  Go to http://%s:%s', hostname, port);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server.js\n **/","module.exports = require(\"axios\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"axios\"\n ** module id = 2\n ** module chunks = 0\n **/","var constants = require('../app/scripts/constants/constants');\nvar helpers = require('./helpers');\nvar InlineEnviromentVariablesPlugin = require('inline-environment-variables-webpack-plugin');\nvar nodeExternals = require('webpack-node-externals');\nvar path = require('path');\nvar webpack = require('webpack');\n\n\nvar METADATA = {\n  title: 'Rose St. Community Center',\n  favicon: constants.ICON,\n  metadata: {\n    image: constants.IMAGE_URL,\n    description: constants.DESCRIPTION,\n    name: constants.SITE_NAME,\n    type: 'website',\n    url: process.env.HOSTNAME || 'localhost'\n  }\n}\n\nmodule.exports = {\n  meta: METADATA,\n  target: 'node',\n  cache: false,\n  context: __dirname,\n  debug: false,\n  devtool: 'source-map',\n  entry: [helpers.root('app/server.js')],\n  output: {\n    path: helpers.root('dist'),\n    filename: 'server.js'\n  },\n  plugins: [\n    new webpack.DefinePlugin({ __CLIENT__: false, __SERVER__: true, __PRODUCTION__: true, __DEV__: false }),\n    new InlineEnviromentVariablesPlugin({ NODE_ENV: 'production' }),\n    new webpack.optimize.UglifyJsPlugin({ minimize: true, compress: { warnings: false } }),\n  ],\n  module: {\n    loaders: [\n      { test: /\\.json$/, loaders: ['json'] },\n      { test: /\\.js$/, loaders: ['babel?presets[]=es2015&presets[]=stage-0&plugins[]=transform-function-bind&plugins[]=transform-class-properties&plugins[]=transform-decorators-legacy'], exclude: /node_modules/ }\n    ],\n    postLoaders: [],\n    noParse: /\\.min\\.js/\n  },\n  externals: [nodeExternals({\n    whitelist: ['webpack/hot/poll?1000']\n  })],\n  resolve: {\n    moduleDirectories: [\n      path.resolve('app'),\n      path.resolve('node_modules'),\n      path.resolve('static')\n    ],\n    extensions: ['', '.json', '.js']\n  },\n  node: {\n    __dirname: true,\n    fs: 'empty',\n    global: 'window',\n    crypto: 'empty',\n    process: true,\n    module: false,\n    clearImmediate: false,\n    setImmediate: false\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./webpack.server.js\n **/","module.exports = {\n  STRIPE: {\n    PUBLISHABLE_KEY: process.env.NODE_ENV !== 'production' ? 'pk_test_f6MApsp3oUQNaZSejidOONkT' : process.env.STRIPE,\n  },\n  ICON: 'https://raw.githubusercontent.com/idelairre/rose_st_client/master/app/favicon.ico',\n  IMAGE_URL: 'https://raw.githubusercontent.com/idelairre/rose_st_client/master/app/images/10612805_674783332611610_5602889381423136186_n.jpg',\n  DESCRIPTION: '74 blocks (with the goal of 100) in East Baltimore where the peace is encouraged by the youth of the community, NOT THE POLICE!',\n  SITE_NAME: 'Rose St. Community Center',\n  SERVER_URL: 'https://rose-st-api.herokuapp.com'\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/scripts/constants/constants.js\n **/","var path = require('path');\nvar appRoot = require('app-root-path');\n\nmodule.exports.root = function(args) {\n  args = Array.prototype.slice.call(arguments, 0);\n  return path.join.apply(path, [appRoot.path].concat(args));\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./helpers.js\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = require(\"app-root-path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"app-root-path\"\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = require(\"inline-environment-variables-webpack-plugin\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"inline-environment-variables-webpack-plugin\"\n ** module id = 8\n ** module chunks = 0\n **/","module.exports = require(\"webpack-node-externals\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"webpack-node-externals\"\n ** module id = 9\n ** module chunks = 0\n **/","module.exports = require(\"webpack\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"webpack\"\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = require(\"koa-compress\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"koa-compress\"\n ** module id = 11\n ** module chunks = 0\n **/","module.exports = require(\"koa-cors\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"koa-cors\"\n ** module id = 12\n ** module chunks = 0\n **/","module.exports = require(\"fs-extra\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs-extra\"\n ** module id = 13\n ** module chunks = 0\n **/","module.exports = require(\"koa\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"koa\"\n ** module id = 14\n ** module chunks = 0\n **/","module.exports = require(\"koa-logging\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"koa-logging\"\n ** module id = 15\n ** module chunks = 0\n **/","module.exports = require(\"koa-ejs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"koa-ejs\"\n ** module id = 16\n ** module chunks = 0\n **/","module.exports = require(\"node-schedule\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"node-schedule\"\n ** module id = 17\n ** module chunks = 0\n **/","module.exports = require(\"koa-static\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"koa-static\"\n ** module id = 18\n ** module chunks = 0\n **/","module.exports = require(\"koa-useragent\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"koa-useragent\"\n ** module id = 19\n ** module chunks = 0\n **/","module.exports = require(\"babel-polyfill\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-polyfill\"\n ** module id = 20\n ** module chunks = 0\n **/","module.exports = require(\"koa-router\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"koa-router\"\n ** module id = 21\n ** module chunks = 0\n **/"],"sourceRoot":""}