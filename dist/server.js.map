{"version":3,"sources":["webpack:///webpack/bootstrap b6c21bbde79f9a039eb6","webpack:///../app/server.js","webpack:///external \"axios\"","webpack:///external \"koa-compress\"","webpack:///external \"koa-cors\"","webpack:///external \"fs-extra\"","webpack:///./helpers.js","webpack:///external \"path\"","webpack:///external \"app-root-path\"","webpack:///external \"koa\"","webpack:///external \"koa-logging\"","webpack:///external \"koa-ejs\"","webpack:///external \"node-schedule\"","webpack:///external \"koa-static\"","webpack:///external \"koa-useragent\"","webpack:///../app/scripts/constants/constants.js","webpack:///external \"babel-polyfill\"","webpack:///external \"koa-router\"","webpack:///./webpack.server.js","webpack:///external \"webpack\"","webpack:///external \"webpack-node-externals\""],"names":[],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b6c21bbde79f9a039eb6\n **/","import axios from 'axios';\nimport compress from 'koa-compress';\nimport cors from 'koa-cors';\nimport fs from 'fs-extra';\nimport helpers from '../configs/helpers';\nimport koa from 'koa';\nimport logger from 'koa-logging';\nimport path from 'path';\nimport render from 'koa-ejs';\nimport schedule from 'node-schedule';\nimport serve from 'koa-static';\nimport userAgent from 'koa-useragent';\n\nimport { DESCRIPTION, IMAGE_URL, SERVER_URL, SITE_NAME } from './scripts/constants/constants';\n\nimport 'babel-polyfill';\n\nconst app = koa();\nconst router = require('koa-router')();\nconst hostname = process.env.HOSTNAME || 'localhost';\nconst port = process.env.PORT || 8000;\n\nfunction getPost(titleUrl) {\n  let posts = fs.readJsonSync('cache.json', 'utf8');\n  for (let i = 0; posts.length > i; i += 1) {\n    if (posts[i].title_url === titleUrl) {\n      return posts[i];\n    }\n  }\n  return false;\n}\n\nconst task = schedule.scheduleJob({ hour: 0, minute: 0, dayOfWeek: 0 }, function () {\n  axios.get(`${SERVER_URL}/posts`).then(response => {\n    if (response.data !== fs.readJsonSync(helpers.root('app/cache.json'), 'utf8')) {\n      fs.writeJsonSync(helpers.root('app/cache.json'), JSON.stringify(response.data));\n    }\n  });\n});\n\nlet config = require('../configs/webpack.server');\n\nrender(app, {\n  root: helpers.root('app'),\n  layout: 'index',\n  viewExt: 'html',\n  cache: false,\n  debug: true\n});\n\napp.use(serve('static'));\n\nrouter.get('/posts/:title_url', function *(next) {\n  const data = getPost(this.params.title_url);\n  Object.assign(config.meta.metadata, {\n    title: data.title,\n    description: data.subheading,\n    publishedTime: data.created_at,\n    modifiedTime: data.updated_at,\n    type: 'article',\n    url: this.request.href\n  });\n  yield this.render('index', { webpackConfig : config });\n});\n\nrouter.get('*', function *(next) {\n  yield this.render('index', { webpackConfig : config });\n});\n\napp.use(cors());\n\napp.use(router.routes());\n\napp.use(router.allowedMethods());\n\napp.use(compress());\n\napp.use(userAgent());\n\napp.listen(port, (...args) => {\n  // console.log('args: ', ...args);\n  console.info('==> âœ…  Server is listening');\n  console.info('==> ðŸŒŽ  Go to http://%s:%s', hostname, port);\n});\n\nif (__DEV__) {\n  if (module.hot) {\n    console.log('[HMR] Waiting for server-side updates');\n    module.hot.accept();\n    module.hot.addStatusHandler((status) => {\n      if (status === 'abort') {\n        setTimeout(() => process.exit(0), 0);\n      }\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/server.js\n **/","module.exports = require(\"axios\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"axios\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = require(\"koa-compress\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"koa-compress\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"koa-cors\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"koa-cors\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = require(\"fs-extra\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs-extra\"\n ** module id = 5\n ** module chunks = 0\n **/","var path = require('path');\nvar appRoot = require('app-root-path');\n\nmodule.exports.root = function(args) {\n  args = Array.prototype.slice.call(arguments, 0);\n  return path.join.apply(path, [appRoot.path].concat(args));\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./helpers.js\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = require(\"app-root-path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"app-root-path\"\n ** module id = 8\n ** module chunks = 0\n **/","module.exports = require(\"koa\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"koa\"\n ** module id = 9\n ** module chunks = 0\n **/","module.exports = require(\"koa-logging\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"koa-logging\"\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = require(\"koa-ejs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"koa-ejs\"\n ** module id = 11\n ** module chunks = 0\n **/","module.exports = require(\"node-schedule\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"node-schedule\"\n ** module id = 12\n ** module chunks = 0\n **/","module.exports = require(\"koa-static\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"koa-static\"\n ** module id = 13\n ** module chunks = 0\n **/","module.exports = require(\"koa-useragent\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"koa-useragent\"\n ** module id = 14\n ** module chunks = 0\n **/","module.exports = {\n  STRIPE: {\n    PUBLISHABLE_KEY: process.env.NODE_ENV !== 'production' ? 'pk_test_f6MApsp3oUQNaZSejidOONkT' : process.env.STRIPE,\n  },\n  IMAGE_URL: 'https://raw.githubusercontent.com/idelairre/rose_st_client/master/app/images/10612805_674783332611610_5602889381423136186_n.jpg',\n  DESCRIPTION: '74 blocks (with the goal of 100) in East Baltimore where the peace is encouraged by the youth of the community, NOT THE POLICE!',\n  SITE_NAME: 'Rose St. Community Center',\n  SERVER_URL: 'https://rose-st-api.herokuapp.com'\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ../app/scripts/constants/constants.js\n **/","module.exports = require(\"babel-polyfill\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-polyfill\"\n ** module id = 16\n ** module chunks = 0\n **/","module.exports = require(\"koa-router\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"koa-router\"\n ** module id = 17\n ** module chunks = 0\n **/","var webpack = require('webpack');\nvar nodeExternals = require('webpack-node-externals');\nvar path = require('path');\nvar helpers = require('./helpers');\n\nvar constants = require('../app/scripts/constants/constants');\n\nvar METADATA = {\n  title: 'Rose St. Community Center',\n  favicon: 'dist/favicon.ico',\n  script: 'localhost:8000/static/dist/app.js',\n  metadata: {\n    image: constants.IMAGE_URL,\n    description: constants.DESCRIPTION,\n    name: constants.SITE_NAME,\n    type: 'website',\n    url: process.env.HOSTNAME || 'localhost'\n  }\n}\n\nmodule.exports = {\n  meta: METADATA,\n  target: 'node',\n  cache: false,\n  context: __dirname,\n  debug: false,\n  devtool: 'source-map',\n  entry: [helpers.root('app/server.js')],\n  output: {\n    path: helpers.root('dist'),\n    filename: 'server.js'\n  },\n  plugins: [\n    new webpack.DefinePlugin({ __CLIENT__: false, __SERVER__: true, __PRODUCTION__: true, __DEV__: false }),\n    new webpack.DefinePlugin({ 'process.env': { NODE_ENV: '\"development\"' } }),\n  ],\n  module: {\n    preLoaders: [\n    ],\n    loaders: [\n      { test: /\\.json$/, loaders: ['json'] },\n      { test: /\\.js$/, loaders: ['babel?presets[]=es2015&presets[]=stage-0&plugins[]=transform-function-bind&plugins[]=transform-class-properties&plugins[]=transform-decorators-legacy'], exclude: /node_modules/ }\n    ],\n    postLoaders: [],\n    noParse: /\\.min\\.js/\n  },\n  externals: [nodeExternals({\n    whitelist: ['webpack/hot/poll?1000']\n  })],\n  resolve: {\n    moduleDirectories: [\n      path.resolve('app'),\n      path.resolve('node_modules'),\n      path.resolve('static')\n    ],\n    extensions: ['', '.json', '.js']\n  },\n  node: {\n    __dirname: true,\n    fs: 'empty',\n    global: 'window',\n    crypto: 'empty',\n    process: true,\n    module: false,\n    clearImmediate: false,\n    setImmediate: false\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./webpack.server.js\n **/","module.exports = require(\"webpack\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"webpack\"\n ** module id = 19\n ** module chunks = 0\n **/","module.exports = require(\"webpack-node-externals\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"webpack-node-externals\"\n ** module id = 20\n ** module chunks = 0\n **/"],"sourceRoot":""}